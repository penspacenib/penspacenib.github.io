(this.webpackJsonppenspacenib=this.webpackJsonppenspacenib||[]).push([[0],{132:function(e){e.exports=JSON.parse('[{"d":"684","t":"118eae6a8a73882ab948ef4238d268f704lMz4yhxz4iAbNcdkABGSIehj6Pnjxpoj8NRuq40B8","b":"627310c24261093584f2b83a0ad184dc7eEwuhYHsnfzSGmE3wtzNm0RF18eDqHzc7qivgZpkEE","p":"120f3c216f9ae2c5f86d4d4c8e645ec4eHuTPw3FpuzQOaC2mk2XKvkKKbbFjgnHo6C2ZzEg8xXBk4EFuxGlPxi0rNpqc43vWWZLM8BQkDZQNx3hRvWGvgoLc7xzOi7VIWgP8IvqOQI","a":"32a85654aa88d89a8961117356f34bf5a6OeDuoF1lLbTRc70Urkgw","f":"8a921a7024338601f04f1702bfad9728GuyB544Qd14k0x7119M9bQ"},{"d":"627","t":"0042a4980ed0121390b1eaea60510bf5NDsdLpTOqGuorqmCz4om8fhPKwQrInUi4EN9cBSjeqa0EJA0wzvHlblQq3pVGhwR","b":"34aa957c547ec7cc535b4ce72af5eff0HFGmeGKg4jlEgYOvcBzZTnU6FcspZG9iCpT2E95oIwxfBgb8YlCfYNMgax9ReAy2","p":"4419f89756ec0c063a499304b7a35dd8RhfvXXdlC02nHiwh9Aq7s2WjkdxB8jWobeeWgS4WCKKewfLBgvoni83atQDbaO6Xa94uQfjsZ5P1rN2G8PAIAXORHZ3IjrXnrbLizjLeuS4","a":"8db786db55eee9c118b559f0236c8525R5cqD5FCelRW5maOse4Ycw","f":"d07071dcc3a02c5574592c1720e2344eBMUZ5pTRDDX9l5BUOIG0lw"}]')},254:function(e,t){},256:function(e,t){},266:function(e,t){},268:function(e,t){},295:function(e,t){},296:function(e,t){},301:function(e,t){},303:function(e,t){},310:function(e,t){},329:function(e,t){},359:function(e,t,n){var a={"./dedao/courses/627.json":[365,3],"./dedao/courses/684.json":[366,4],"./dedao/index.json":[132]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(c,3)}))}c.keys=function(){return Object.keys(a)},c.id=359,e.exports=c},360:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(13),i=n.n(c),r=n(54),o=n(15),s=n(226),l=n(436),u=n(437);n(145);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))}var j=n(204),b=Object(j.createEncryptor)({key:"penspacenib".repeat(4),hmac:!1,debug:!1}),p=b.decrypt,f=function(e){for(var t=function(){var t=b.encrypt(e);if(["/","+"].every((function(e){return!t.includes(e)})))return{v:t.replace(/=+$/g,"")}};;){var n=t();if("object"===typeof n)return n.v}};function O(e,t){return{list:e.map((function(e){return t(e)})),entities:e.reduce((function(e,n){return e[t(n)]=n,e}),{})}}function h(e){return e.list.map((function(t){return e.entities[t]}))}n(199);var m=n(200),x=n.n(m),g=(n(201),n(202)),y=[{code:"dedao",name:"\u5f97\u5230",abbr:"d",slogan:"\u77e5\u8bc6\u5c31\u5728\u5f97\u5230"}],v=O(y,(function(e){return e.code})),k=n(18),S={dedao:n(132).map((function(e){return{id:e.d,title:p(e.t),brief:p(e.b),poster:p(e.p),author:p(e.a),finished:p(e.f)}}))};function N(e){var t=e.platform;return{courseCollection:Object(a.useMemo)((function(){return O(S[t.code].map((function(e){return Object(k.a)(Object(k.a)({},e),{},{fuzzyId:f(e.id)})})),(function(e){return e.id}))}),[t])}}var I=n(12),C=n(78),M=n.n(C),P=n(408),w=n(410),T=n(411),R=n(362),L=n(45),W=n(208),z=n.n(W),B=n(209),A=n.n(B),E=n(409),F=n(31),G=n(207),K=n.n(G),q=n(206),D=n.n(q);var Y=n(133),U=new(n.n(Y).a),H=n(2);function Q(e){var t=e.pattern,n=e.input,a=e.tag,c=void 0===a?"em":a;if(!t)return n;var i=M.a.match(t,n,{pre:"<".concat(c,">"),post:"</".concat(c,">"),caseSensitive:!1});return Object(H.jsx)("span",{dangerouslySetInnerHTML:{__html:(null===i||void 0===i?void 0:i.rendered)||n}})}var Z=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return}},X=function(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}};function J(){var e=Object(F.a)();return Object(H.jsx)(R.a,{edge:"start",color:"inherit",onClick:function(){U.emit("toggle-theme")},children:"light"===e.palette.type?Object(H.jsx)(D.a,{}):Object(H.jsx)(K.a,{})})}var _=Object(P.a)((function(e){return{toolbar:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},title:{flexGrow:1,marginLeft:e.spacing(1)},section:{marginRight:e.spacing(2)},pbr:{marginRight:e.spacing(2)},mainTitle:{fontWeight:e.typography.fontWeightBold,"& > sup":{fontSize:"80%"}},subTitle:{verticalAlign:"top"},offset:e.mixins.toolbar}}));function V(e){var t=e.title,n=e.course,a=e.actions,c=e.goBack,i=_(),r=nt().knowSecret,o=Object(E.a)({disableHysteresis:!0,threshold:0}),s=Object(E.a)({disableHysteresis:!0,threshold:80});return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(w.a,{position:"fixed",elevation:o?4:0,children:Object(H.jsxs)(T.a,{variant:"regular",className:i.toolbar,children:[!c&&Object(H.jsx)(R.a,{color:"inherit",disableRipple:!0,children:Object(H.jsx)(z.a,{})}),Boolean(c&&r)&&Object(H.jsx)(R.a,{color:"inherit",onClick:c,children:Object(H.jsx)(A.a,{})}),Object(H.jsxs)(L.a,{variant:"inherit",display:"block",noWrap:!0,className:i.title,children:[Object(H.jsx)(L.a,{variant:"h6",color:"inherit",className:i.mainTitle,children:t}),Boolean(s&&n)&&Object(H.jsx)(L.a,{variant:"caption",color:"inherit",className:i.subTitle,children:n.title})]}),a,Object(H.jsx)(J,{})]})}),Object(H.jsx)("div",{className:i.offset})]})}var $=n(440),ee=n(210),te=n.n(ee),ne=n(417),ae=n(416),ce=n(211),ie=n.n(ce),re=n(412),oe=n(413),se=n(415),le=n(414),ue=n(99),de=n.n(ue),je=Object(P.a)((function(e){return{drawer:{"& .MuiPaper-root":{minWidth:250,maxWidth:"85vw"},"& .MuiListItem-root":{alignItems:"flex-start"}},text:{overflow:"hidden",whiteSpace:"pre-wrap",fontSize:e.typography.pxToRem(14),fontWeight:e.typography.fontWeightBold,marginRight:e.spacing(1)},icon:{minWidth:"auto"}}}));function be(e){var t=e.course,n=e.sectionEntityList,c=Object(F.a)(),i=je(),r=Object(a.useRef)(null),o=Object(a.useState)(!1),s=Object(I.a)(o,2),l=s[0],u=s[1],d=Qe({course:t,sectionList:n}),j=d.selectedSectionId,b=d.updateSelectedSectionId;Object($.a)((function(){if(l&&r.current){var e=r.current.querySelector(".selected");e&&setTimeout((function(){Object(g.a)(e,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})}),300)}}),[l]);var p=Object(a.useMemo)((function(){return Object(H.jsx)(re.a,{component:"div",children:n.map((function(e){var t=e.sectionPid===j;return Object(H.jsxs)(oe.a,{button:!0,selected:t,className:te()({selected:t}),onClick:function(){b(e.sectionPid),u(!1),e.sectionPid!==j&&window.scrollTo(0,0)},children:[Object(H.jsx)(le.a,{primary:Object(H.jsx)(L.a,{className:i.text,color:t?"light"===c.palette.type?"primary":"textPrimary":"light"===c.palette.type?"inherit":"textSecondary",children:e.sectionTitle})}),Object(H.jsx)(se.a,{className:i.icon,children:Object(H.jsx)(de.a,{color:t?"light"===c.palette.type?"primary":"inherit":"disabled"})})]},e.sectionPid)}))})}),[c,i.text,i.icon,n,j,b]);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(R.a,{edge:"start",color:"inherit",onClick:function(){u(!0)},children:Object(H.jsx)(ae.a,{badgeContent:"all"===j?null:"\u2713",color:"primary",children:Object(H.jsx)(ie.a,{})})}),Object(H.jsx)(ne.a,{ref:r,anchor:"left",variant:"temporary",open:l,keepMounted:!0,className:i.drawer,onClose:function(){return u(!1)},children:p})]})}var pe=n(419),fe=n(212),Oe=n.n(fe),he=n(418),me=O([{text:"0.75x",value:.75},{text:"\u6b63\u5e38\u500d\u901f",value:1},{text:"1.25x",value:1.25},{text:"1.5x",value:1.5},{text:"1.75x",value:1.75},{text:"2.0x",value:2},{text:"2.25x",value:2.25},{text:"2.5x",value:2.5},{text:"3.0x",value:3}],(function(e){return String(e.value)})),xe=me.entities[1].value,ge="space-pbr",ye=me.entities,ve=Object(P.a)((function(){return{icon:{minWidth:"auto"}}}));function ke(){var e=Object(F.a)(),t=ve(),n=Object(a.useState)(!1),c=Object(I.a)(n,2),i=c[0],r=c[1],o=Re(),s=Object(I.a)(o,2),l=s[0],u=s[1],d=Object(a.useCallback)((function(e){u({type:"updatePlaybackRate",payload:{value:e}})}),[u]),j=Object(a.useMemo)((function(){var n=h(me);return Object(H.jsx)(re.a,{component:"div",subheader:Object(H.jsx)(he.a,{component:"div",children:"\u97f3\u9891\u64ad\u653e\u500d\u901f"}),children:n.map((function(n){var a=n.value===l.playbackRate;return Object(H.jsxs)(oe.a,{button:!0,selected:a,onClick:function(){d(n.value),r(!1)},children:[Object(H.jsx)(le.a,{primary:Object(H.jsx)(L.a,{color:a?"light"===e.palette.type?"primary":"textPrimary":"light"===e.palette.type?"inherit":"textSecondary",children:n.text})}),Object(H.jsx)(se.a,{className:t.icon,children:Object(H.jsx)(de.a,{color:a?"light"===e.palette.type?"primary":"inherit":"disabled"})})]},n.value)}))})}),[e,t.icon,l,d]);return Object(pe.a)((function(){var e=Z(ge);me.list.includes(String(e))||(e=xe),d(Number(e))})),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(R.a,{edge:"start",color:"inherit",onClick:function(){r(!0)},children:Object(H.jsx)(ae.a,{badgeContent:1===ye[l.playbackRate].value?null:ye[l.playbackRate].text,color:"primary",children:Object(H.jsx)(Oe.a,{})})}),Object(H.jsx)(ne.a,{anchor:"bottom",variant:"temporary",open:i,onClose:function(){return r(!1)},children:j})]})}var Se=n(420),Ne=Object(P.a)((function(e){return{loading:{display:"flex","justify-content":"center",margin:"100px 0"}}}));function Ie(){var e=Ne();return Object(H.jsx)("div",{className:e.loading,children:Object(H.jsx)(Se.a,{color:"secondary"})})}var Ce="space-ssim",Me="space-ckm",Pe=function(e,t){switch(t.type){case"updatePlaybackRate":var n=t.payload.value;return X(ge,n),Object(k.a)(Object(k.a)({},e),{},{playbackRate:n});case"updateSelectedSectionId":var a=t.payload.courseId,c=t.payload.sectionId,i=Object(k.a)({},e.selectedSectionIdMap);return"all"!==c?i[a]=c:delete i[a],X(Ce,i),Object(k.a)(Object(k.a)({},e),{},{selectedSectionIdMap:i});case"switchPlayingMediaId":return Object(k.a)(Object(k.a)({},e),{},{playingMediaId:t.payload.id||null});case"updateCourseKeyword":var r=t.payload.platform,o=String(t.payload.keyword).trim(),s=Object(k.a)({},e.courseKeywordMap);return o?s[r]=o:delete s[r],X(Me,s),Object(k.a)(Object(k.a)({},e),{},{courseKeywordMap:s});default:return e}},we=Object(a.createContext)(null),Te={playbackRate:xe,selectedSectionIdMap:Z(Ce)||{},playingMediaId:null,courseKeywordMap:Z(Me)||{}},Re=function(){return Object(a.useContext)(we)};function Le(e){var t=e.children;return Object(H.jsx)(we.Provider,{value:Object(a.useReducer)(Pe,Te),children:t})}var We=n(214),ze=n.n(We),Be=n(422),Ae=n(421),Ee=n(215),Fe=n.n(Ee),Ge=n(363),Ke=n(423),qe=n(438),De=Object(P.a)((function(e){return{appBar:{position:"fixed"},title:{fontWeight:e.typography.fontWeightBold,marginLeft:e.spacing(2),flex:1},clear:{fontSize:e.typography.pxToRem(16),fontWeight:e.typography.fontWeightBold},okay:{fontSize:e.typography.pxToRem(16),fontWeight:e.typography.fontWeightBold},input:{marginTop:e.spacing(1)},item:{"& em":{fontStyle:"normal",color:"light"===e.palette.type?e.palette.primary.main:e.palette.error.main}},courseTitle:{fontWeight:e.typography.fontWeightBold},offset:e.mixins.toolbar}})),Ye=Object(a.forwardRef)((function(e,t){return Object(H.jsx)(Ge.a,Object(k.a)({direction:"up",ref:t},e))}));function Ue(e){var t=e.platform,n=e.courseCollection,c=Object(o.g)(),i=De(),r=He({platform:t,courseCollection:n}),s=r.courseKeyword,l=r.updateCourseKeyword,u=r.getCourseEntityList,d=Object(a.useRef)(null),j=Object(a.useState)(!1),b=Object(I.a)(j,2),p=b[0],f=b[1],O=Object(a.useState)(s),h=Object(I.a)(O,2),m=h[0],x=h[1],g=Object(a.useMemo)((function(){return u(m)}),[m,u]),y=Object(a.useCallback)((function(){return f(!0)}),[]),v=Object(a.useCallback)((function(){x(s),f(!1)}),[s]),k=Object(a.useCallback)((function(){x(""),d.current.focus()}),[]),S=Object(a.useCallback)((function(){l(m),f(!1)}),[m,l]);return Object($.a)((function(){}),[p]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(R.a,{edge:"start",color:"inherit",onClick:y,children:Object(H.jsx)(ae.a,{badgeContent:s?"\u2713":null,color:"primary",children:Object(H.jsx)(ze.a,{})})}),Object(H.jsxs)(Ae.a,{fullScreen:!0,open:p,onClose:v,TransitionComponent:Ye,children:[Object(H.jsx)(w.a,{className:i.appBar,children:Object(H.jsxs)(T.a,{children:[Object(H.jsx)(R.a,{edge:"start",color:"inherit",onClick:v,children:Object(H.jsx)(Fe.a,{})}),Object(H.jsx)(L.a,{variant:"h6",className:i.title,children:"\u641c\u7d22\u8bfe\u7a0b"}),Object(H.jsx)(Be.a,{color:"inherit",variant:"text",className:i.clear,onClick:k,children:"\u6e05\u7a7a"}),Object(H.jsx)(Be.a,{color:"inherit",variant:"text",className:i.okay,onClick:S,children:"\u786e\u5b9a"})]})}),Object(H.jsx)("div",{className:i.offset}),Object(H.jsxs)(Ke.a,{children:[Object(H.jsx)(qe.a,{inputRef:d,label:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u8fdb\u884c\u641c\u7d22",value:m,onChange:function(e){return x(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&S()},color:"secondary",fullWidth:!0,autoFocus:!0,className:i.input}),Object(H.jsxs)(re.a,{children:[0===g.length&&Object(H.jsx)(oe.a,{children:Object(H.jsx)(le.a,{secondary:"\u672a\u641c\u7d22\u5230\u8bfe\u7a0b"})}),g.length>0&&g.map((function(e){return Object(H.jsx)(oe.a,{button:!0,className:i.item,children:Object(H.jsx)(le.a,{primary:Object(H.jsx)(L.a,{className:i.courseTitle,children:Q({pattern:m,input:e.title})}),secondary:Q({pattern:m,input:e.brief}),onClick:function(){l(m.trim()||e.title),f(!1),c.push("/".concat(t.abbr,"/c/").concat(e.fuzzyId,"?").concat("\u200e"))}})},e.id)}))]})]})]})]})}function He(e){var t=e.platform,n=e.courseCollection,c=Re(),i=Object(I.a)(c,2),r=i[0],o=i[1],s=r.courseKeywordMap,l=Object(a.useMemo)((function(){return String(s[t.code]||"").trim()}),[t,s]),u=Object(a.useCallback)((function(e){var t=h(n).sort((function(e,t){return t.id.padStart(18,"0").localeCompare(e.id.padStart(18,"0"))}));return e&&(t=t.filter((function(t){return M.a.test(e,t.title)||M.a.test(e,t.brief)}))),t}),[n]);return{courseKeyword:l,updateCourseKeyword:Object(a.useCallback)((function(e){o({type:"updateCourseKeyword",payload:{platform:t.code,keyword:e}})}),[t,o]),getCourseEntityList:u}}function Qe(e){var t=e.course,n=e.sectionList,c=Re(),i=Object(I.a)(c,2),r=i[0],o=i[1],s=r.selectedSectionIdMap;return{selectedSectionId:Object(a.useMemo)((function(){var e=t.id,a=s[e];return n.find((function(e){return e.sectionPid===a}))||(a="all"),a}),[t,n,s]),updateSelectedSectionId:Object(a.useCallback)((function(e){o({type:"updateSelectedSectionId",payload:{courseId:t.id,sectionId:e}})}),[t,o])}}var Ze=v.entities,Xe=function(e){Object(a.useEffect)((function(){if(e){var t,n=document.querySelector('[name="description"]');if("code"in e)n.setAttribute("content",null===(t=Ze[e.code])||void 0===t?void 0:t.slogan);else n.setAttribute("content",e.brief||"")}}),[e])},Je=n(0),_e=Je.useRef,Ve=Je.useEffect;function $e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_e(document.title);Ve((function(){document.title=e}),[e]),Ve((function(){var e=n.current;return function(){t||(document.title=e)}}),[t])}var et=function(e){Object(a.useEffect)((function(){Array.from(document.querySelectorAll('[rel="icon"],[rel="apple-touch-icon"]')).forEach((function(t){t.setAttribute("href","/space/".concat(e.code,".png"))}))}),[e])};function tt(){var e=Object(o.h)().pathname,t=Object(a.useMemo)((function(){return e.match(/^\/([^/]+)/)?RegExp.$1:""}),[e]);return Object(a.useMemo)((function(){return y.find((function(e){return e.code===t||e.abbr===t}))}),[t])}function nt(){var e=new URLSearchParams(Object(o.h)().search);return{knowSecret:e.has("\u200e"),revealDraft:e.has("draft")}}var at=n(424),ct=n(105),it=n(104),rt="space-theme",ot=function(e){return{palette:{type:e,primary:{main:"light"===e?ct.a.A700:it.a[900],light:ct.a.A700,dark:it.a[900],contrastText:"#fff"},secondary:{main:"light"===e?ct.a.A400:"rgba(255, 255, 255, 0.7)",light:ct.a.A400,dark:"rgba(255, 255, 255, 0.7)",contrastText:"#000"},text:{primary:"light"===e?"#000":"#fff"},background:{default:"light"===e?it.a[300]:it.a[700]},contrastThreshold:3,tonalOffset:.2}}};var st=n(425),lt=n(426),ut=Object(P.a)((function(e){return{container:{position:"absolute",left:"50%",top:e.spacing(2),transform:"translate(-50%, 0)"},content:{padding:"16px !important"}}}));function dt(){var e=ut();return $e("space"),Object(H.jsxs)(Ke.a,{maxWidth:"sm",className:e.container,children:[Object(H.jsx)(st.a,{elevation:0,children:Object(H.jsx)(lt.a,{className:e.content,children:Object(H.jsx)(L.a,{variant:"caption",children:"\u8f6c\u53d8\u603b\u662f\u4ece\u7ed3\u675f\u5f00\u59cb\uff0c\u7d27\u8ddf\u7740\u7ecf\u5386\u4e86\u4e00\u6bb5\u8ff7\u832b\u548c\u75db\u82e6\u4e4b\u540e\uff0c\u6162\u6162\u624d\u4f1a\u6709\u65b0\u7684\u5f00\u59cb\u3002"})})}),Object(H.jsx)(st.a,{elevation:0,style:{marginTop:"8px"},children:Object(H.jsx)(lt.a,{className:e.content,children:Object(H.jsxs)(L.a,{variant:"caption",children:["\u4e00\u4e2a\u53eb\u514b\u52b3\u65af\u7eb3\uff08Klausner\uff09\u7684\u4eba\uff0c\u6c89\u8ff7\u4e8e\u58f0\u97f3\u3002\u4ed6\u8ba4\u4e3a\uff0c\u4e16\u754c\u4e0a\u6709\u5f88\u591a\u58f0\u97f3\u56e0\u9891\u7387\u9ad8\u800c\u65e0\u6cd5\u542c\u5230\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u6709\u4e00\u6b21\uff0c\u4ed6\u53bb\u770b\u75c5\u3002\u4ed6\u8ddf\u533b\u751f\u8bf4\uff0c\u4ed6\u6b63\u5728\u5c1d\u8bd5\u53d1\u660e\u4e00\u79cd\u673a\u5668\uff0c\u53ef\u4ee5\u964d\u4f4e\u58f0\u97f3\u7684\u9891\u7387\uff0c\u8ba9\u90a3\u4e9b\u65e0\u6cd5\u542c\u89c1\u7684\u58f0\u97f3\u53ef\u4ee5\u88ab\u542c\u5230\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u540e\u6765\uff0c\u673a\u5668\u7ec8\u4e8e\u9020\u597d\u4e86\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u4ed6\u5728\u9662\u5b50\u91cc\u9996\u6b21\u5b9e\u9a8c\uff0c\u90bb\u5c45\u5728\u82b1\u56ed\u91cc\u526a\u73ab\u7470\uff0c\u4ed6\u4ece\u8033\u673a\u91cc\u542c\u5230\u73ab\u7470\u5728\u5c16\u53eb\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u7b2c\u4e8c\u5929\uff0c\u4ed6\u505a\u4e86\u4e00\u4e2a\u66f4\u5927\u7684\u5b9e\u9a8c\u3002\u4ed6\u62ff\u65a7\u5934\u780d\u4e00\u68f5\u5927\u5c71\u6bdb\u6989\u6811\u3002\u4ed6\u542c\u5230\u6811\u53d1\u51fa\u7684\u6df1\u6c89\u800c\u60b2\u60e8\u7684\u547b\u541f\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u514b\u52b3\u65af\u7eb3\u8d76\u56de\u5c4b\u5b50\uff0c\u7ed9\u533b\u751f\u6253\u7535\u8bdd\uff1a\u201c\u8bf7\u8fc7\u6765\uff0c\u5feb\u6765\u3002\u6211\u60f3\u8ba9\u5176\u4ed6\u4eba\u542c\u5230\u3002\u592a\u96be\u4ee5\u7f6e\u4fe1\u4e86\uff01\u201d",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u533b\u751f\u540c\u610f\u8fc7\u6765\uff0c\u542c\u542c\u8033\u673a\u91cc\u9762\u7684\u58f0\u97f3\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u533b\u751f\u5230\u4e86\u4ee5\u540e\uff0c\u514b\u52b3\u65af\u7eb3\u7b2c\u4e8c\u6b21\u780d\u6811\u65f6\uff0c\u4e00\u4e2a\u5927\u6811\u679d\u6389\u4e0b\u6765\uff0c\u628a\u673a\u5668\u7838\u6bc1\u4e86\u3002\u514b\u52b3\u65af\u7eb3\u95ee\u533b\u751f\u662f\u5426\u542c\u5230\u4e86\u547b\u541f\u58f0\uff0c\u533b\u751f\u8bf4\u6ca1\u6709\u542c\u5230\u4efb\u4f55\u58f0\u97f3\u3002",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),"\u514b\u52b3\u65af\u7eb3\u975e\u5e38\u96be\u8fc7\uff0c\u6700\u540e\u4ed6\u8981\u6c42\u533b\u751f\u5728\u6811\u7684\u4f24\u53e3\u4e0a\u9762\u6d82\u4e00\u4e9b\u7898\u9152\uff0c\u533b\u751f\u540c\u610f\u4e86\u3002"]})})})]})}var jt=n(441),bt=n(429),pt=n(101),ft=n(427),Ot=n(428),ht=Object(P.a)((function(e){return{root:{position:"relative"},media:{minHeight:150,maxHeight:300},content:{height:52,padding:"4px 8px !important"},title:{fontSize:e.typography.pxToRem(14),fontWeight:e.typography.fontWeightBold,display:"-webkit-box",lineClamp:2,boxOrient:"vertical"},status:{position:"absolute",top:e.typography.pxToRem(4),right:e.typography.pxToRem(4),color:"#eee",background:"rgba(0, 0, 0, .55)",padding:"2px 3px",fontSize:e.typography.pxToRem(10),fontWeight:"bold",pointerEvents:"none",borderRadius:"3px"}}}));function mt(e){var t=e.course,n=ht(),c=Object(o.g)(),i=tt(),r=Object(a.useRef)(null);return Object(pt.a)((function(){var e=new IntersectionObserver((function(n){var a=Object(I.a)(n,1)[0];a.isIntersecting&&(a.target.src=t.poster,e.unobserve(a.target),e.disconnect())}),{rootMargin:"0px"});return e.observe(r.current),function(){e.disconnect()}})),Object(H.jsxs)(st.a,{elevation:1,className:n.root,children:[Object(H.jsxs)(ft.a,{onClick:function(){c.push("/".concat(i.abbr,"/c/").concat(t.fuzzyId,"?").concat("\u200e"))},children:[Object(H.jsx)(Ot.a,{ref:r,component:"img",image:"",className:n.media,referrerPolicy:"no-referrer"}),Object(H.jsx)(lt.a,{className:n.content,children:Object(H.jsx)(L.a,{variant:"caption",component:"div",className:n.title,children:t.title})})]}),t.finished&&Object(H.jsx)("div",{className:n.status,children:"\u5df2\u5b8c\u7ed3"})]})}var xt=Object(P.a)((function(e){return{root:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},noResult:{textAlign:"center",marginTop:e.spacing(2)}}}));function gt(){var e=xt(),t=tt(),n=He({platform:t,courseCollection:N({platform:t}).courseCollection}),c=n.courseKeyword,i=n.getCourseEntityList,r=Object(a.useMemo)((function(){return i(c)}),[c,i]);return Object(H.jsxs)(bt.a,{container:!0,spacing:1,alignItems:"stretch",className:e.root,children:[0===r.length&&Object(H.jsx)(bt.a,{item:!0,xs:12,children:Object(H.jsx)(L.a,{variant:"inherit",component:"div",color:"textSecondary",className:e.noResult,children:"\u672a\u641c\u7d22\u5230\u8bfe\u7a0b"})}),r.length>0&&Object(H.jsx)(H.Fragment,{children:r.map((function(e){return Object(H.jsx)(bt.a,{item:!0,xs:4,sm:3,md:3,children:Object(H.jsx)(mt,{course:e})},e.id)}))})]})}var yt=Object(P.a)((function(e){return{container:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},actionIcon:{marginRight:e.spacing(2)}}})),vt=0;function kt(){var e=yt(),t=Object(jt.a)().y,n=tt(),a=N({platform:n}).courseCollection;return $e(n.name),et(n),Xe(n),Object($.a)((function(){vt=t}),[t]),Object(pe.a)((function(){document.documentElement.scrollTop=vt})),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(V,{title:n.name,actions:Object(H.jsx)("div",{className:e.actionIcon,children:Object(H.jsx)(Ue,{platform:n,courseCollection:a})})}),Object(H.jsx)(Ke.a,{maxWidth:"md",className:e.container,children:Object(H.jsx)(gt,{})})]})}var St=n(135),Nt=n.n(St),It=n(136),Ct=n(218),Mt=n(430),Pt=Object(P.a)((function(e){return{heading:{"margin-top":e.spacing(1),"margin-bottom":e.spacing(1),"& > h6":{"font-weight":"bold"}}}}));function wt(e){var t=e.course,n=Pt();return Object(H.jsxs)("div",{className:n.heading,children:[Object(H.jsx)(L.a,{variant:"h6",display:"block",children:t.title}),Object(H.jsxs)(L.a,{variant:"caption",display:"block",color:"textSecondary",children:[t.brief,t.finished&&" \xb7 [\u5df2\u5b8c\u7ed3]",Boolean(!t.finished&&t.lastUpdatedAt)&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("br",{}),"\u6700\u8fd1\u66f4\u65b0: ",t.lastUpdatedAt]})]})]})}var Tt=n(217),Rt=n(439),Lt=n(434),Wt=n(435),zt=n(219),Bt=n.n(zt),At=n(431),Et=n(433),Ft=n(432),Gt=n(220),Kt=n.n(Gt),qt=n(223),Dt=n.n(qt),Yt=n(222),Ut=n.n(Yt),Ht=n(221),Qt=n.n(Ht),Zt=n(224),Xt=n.n(Zt),Jt=n(225),_t=n.n(Jt),Vt=Object(P.a)((function(e){return{root:{position:"relative"},header:{paddingTop:12,paddingBottom:0},title:{fontSize:e.typography.pxToRem(14),fontWeight:e.typography.fontWeightBold},buffer:{position:"absolute",height:"100%",left:0,top:0,transition:"width 200ms ease-out",opacity:.1,background:e.palette.secondary.main},progress:{position:"absolute",height:"100%",left:0,top:0,transition:"width 200ms ease-out",opacity:.15,background:e.palette.secondary.main},duration:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:12},action:{position:"relative",height:38,paddingTop:4,paddingBottom:4}}}));function $t(e){var t=e.audio,n=Object(a.useRef)(null),c=Vt(),i=Re(),r=Object(I.a)(i,2),o=r[0],s=r[1],l=o.playingMediaId,u=nt(),d=u.knowSecret,j=u.revealDraft,b=Object(a.useState)("STOPPED"),p=Object(I.a)(b,2),f=p[0],O=p[1],h=Object(a.useState)(!1),m=Object(I.a)(h,2),y=m[0],v=m[1],k=Object(a.useState)(0),S=Object(I.a)(k,2),N=S[0],C=S[1],M=Object(a.useState)(0),P=Object(I.a)(M,2),w=P[0],T=P[1],W=Object(a.useState)(!1),z=Object(I.a)(W,2),B=z[0],A=z[1],E=Object(a.useState)(0),F=Object(I.a)(E,2),G=F[0],K=F[1],q=Object(a.useState)(1e3*t.audioDuration||0),D=Object(I.a)(q,2),Y=D[0],Q=D[1],Z=Object(a.useMemo)((function(){return w?100*N/w:0}),[N,w]),X=Object(a.useMemo)((function(){return Y?y?100:100*G/Y:0}),[y,G,Y]),J=Object(a.useMemo)((function(){if(!Y)return"--:--";var e=x.a.duration(y?0:Math.max(0,Y-G)),t=[e.minutes(),e.seconds()];return e.hours()>0&&t.unshift(e.hours()),t.map((function(e){return String(e).padStart(2,"0")})).join(":")}),[y,G,Y]),_=Object(a.useCallback)((function(e){var t=e.position;K(t)}),[]),V=Object(a.useCallback)((function(){s({type:"switchPlayingMediaId",payload:{id:t.audioPid}})}),[t,s]),ee=Object(a.useCallback)((function(){s({type:"switchPlayingMediaId",payload:{id:null}})}),[s]);Object($.a)((function(){t.audioPid===l?"PLAYING"!==f&&O("PLAYING"):"PLAYING"===f&&O("PAUSED")}),[t,f,l]),Object(a.useEffect)((function(){var e=function(e){e.id===t.audioPid&&(y&&(v(!1),K(0)),V(),Object(g.a)(n.current,{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"}))};return U.on("replyNextPlayingMediaId",e),function(){U.off("replyNextPlayingMediaId",e)}}),[t,y,V]);var te=Object(a.useCallback)((function(){var e=Math.max(0,X-5),t=Y*e/100;K(Math.max(t,G-3e4)),y&&v(!1),l||O("PLAYING"),V()}),[y,G,Y,X,V,l]),ne=Object(a.useCallback)((function(){if(X>=100)K(0);else{var e=Math.min(X+5,100),t=Math.min(Y*e/100,Y);K(Math.min(t,G+3e4))}y&&v(!1),l||O("PLAYING"),V()}),[y,G,Y,X,V,l]);return Object($.a)((function(){A("PLAYING"===f&&(0===X||Z>0&&Z<100&&X===Z))}),[f,X,Z]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(st.a,{ref:n,elevation:0,square:!0,className:c.root,children:[Object(H.jsx)(Mt.a,{}),Object(H.jsx)("div",{className:c.buffer,style:{width:"".concat(Math.max(X,Z),"%")}}),Object(H.jsx)("div",{className:c.progress,style:{width:"".concat(X,"%")}}),Object(H.jsx)(At.a,{className:c.header,action:Boolean((d||j)&&t.audioArticleUrl)&&Object(H.jsx)(Ft.a,{href:t.audioArticleUrl,target:"_blank",rel:"noreferrer",children:Object(H.jsx)(R.a,{size:"small",children:Object(H.jsx)(Kt.a,{})})}),title:Object(H.jsx)(L.a,{variant:"h6",color:"textSecondary",className:c.title,children:t.audioTitle})}),Object(H.jsxs)(Et.a,{className:c.action,children:[Object(H.jsxs)(R.a,{size:"small",onClick:function(){"PLAYING"===f?ee():(y&&(v(!1),K(0)),l||O("PLAYING"),V())},children:["PLAYING"===f&&Object(H.jsxs)(H.Fragment,{children:[B&&Object(H.jsx)(Se.a,{size:24,color:"secondary",disableShrink:!0}),!B&&Object(H.jsx)(Qt.a,{fontSize:"medium",color:"action"})]}),"PLAYING"!==f&&Object(H.jsxs)(H.Fragment,{children:[y&&Object(H.jsx)(Ut.a,{fontSize:"medium",color:"action"}),!y&&Object(H.jsx)(Dt.a,{fontSize:"medium",color:"action"})]})]}),Object(H.jsx)("div",{}),Object(H.jsx)(R.a,{size:"small",onClick:te,children:Object(H.jsx)(Xt.a,{fontSize:"small",color:"action"})}),Object(H.jsx)(R.a,{size:"small",onClick:ne,children:Object(H.jsx)(_t.a,{fontSize:"small",color:"action"})}),Object(H.jsx)(L.a,{variant:"inherit",display:"block",noWrap:!0,color:"textSecondary",className:c.duration,children:J})]})]}),"PLAYING"===f&&Object(H.jsx)(Bt.a,{url:t.audioUrl,playStatus:f,autoLoad:!1,loop:!1,playbackRate:o.playbackRate,position:G,onLoading:function(e){C(Math.min(e.bytesTotal*X/100+e.bytesLoaded,e.bytesTotal)),T(e.bytesTotal),Q(Y?Math.min(Y,e.duration):e.duration)},onPlaying:_,onFinishedPlaying:function(){O("STOPPED"),v(!0),U.emit("requestNextPlayingMediaId")},onError:function(e){var t=e.errorCode,n=e.description;console.log("error",{errorCode:t,description:n})}})]})}var en=Object(P.a)((function(e){return{summary:{cursor:"default !important",minHeight:"auto !important",paddingLeft:"12px",position:"sticky",top:"56px",zIndex:1,backgroundColor:e.palette.background.paper,borderBottom:"1px solid ".concat(e.palette.divider),"& > .Mui-expanded":{margin:"10px 0"}},heading:{fontSize:e.typography.pxToRem(14),fontWeight:e.typography.fontWeightBold,borderLeft:"3px solid ".concat(e.palette.secondary.main),paddingLeft:8},details:{padding:0,"& .empty":{padding:"8px"},"& .MuiPaper-root:first-of-type hr.MuiDivider-root":{backgroundColor:"transparent"}}}}));function tn(e){var t=e.section,n=en();return Object(H.jsxs)(Rt.a,{expanded:!0,elevation:1,square:!0,children:["-1"!==t.sectionTitle&&Object(H.jsx)(Lt.a,{className:n.summary,children:Object(H.jsx)(L.a,{className:n.heading,children:t.sectionTitle})}),Object(H.jsx)(Wt.a,{className:n.details,children:Object(H.jsx)(bt.a,{container:!0,spacing:0,children:Object(H.jsxs)(bt.a,{item:!0,xs:12,sm:12,children:[!t.list.length&&Object(H.jsx)("div",{className:"empty",children:Object(H.jsx)(L.a,{variant:"caption",display:"block",color:"textSecondary",children:"\u6682\u65e0\u5185\u5bb9"})}),t.list.length>0&&Object(H.jsx)(H.Fragment,{children:t.list.map((function(e){return Object(H.jsx)($t,{audio:e},e.audioPid)}))})]})})})]})}var nn=Object(P.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}}));function an(e){var t=e.course,n=e.sectionList,c=nn(),i=Re(),r=Object(I.a)(i,2),o=r[0],s=r[1],l=Qe({course:t,sectionList:n}).selectedSectionId,u=o.playingMediaId;Object(Tt.a)((function(){s({type:"switchPlayingMediaId",payload:{id:null}})}));var d=Object(a.useMemo)((function(){return"all"===l?n:n.filter((function(e){return e.sectionPid===l}))}),[n,l]),j=Object(a.useMemo)((function(){return d.map((function(e){return e.list})).flat()}),[d]),b=Object(a.useCallback)((function(){var e,t=j.findIndex((function(e){return e.audioPid===u}));if(t+1>=j.length)s({type:"switchPlayingMediaId",payload:{id:null}});else{var n=null===(e=j[t+1])||void 0===e?void 0:e.audioPid;U.emit("replyNextPlayingMediaId",{id:n})}}),[u,s,j]);return Object($.a)((function(){null!==u&&(j.find((function(e){return e.audioPid===u}))||s({type:"switchPlayingMediaId",payload:{id:null}}))}),[u,j,s]),Object(a.useEffect)((function(){return U.on("requestNextPlayingMediaId",b),function(){U.off("requestNextPlayingMediaId",b)}}),[b]),Object(H.jsx)("div",{className:c.root,children:d.map((function(e){return Object(H.jsx)(tn,{section:e},e.sectionPid)}))})}var cn=Object(P.a)((function(e){return{actionIcon:{marginRight:e.spacing(2)}}}));function rn(){var e,t=cn(),c=Object(o.g)(),i=tt(),r=N({platform:i}).courseCollection.entities,s=nt().knowSecret,l=Object(o.i)().courseId,u=Object(a.useMemo)((function(){return p(l)}),[l]),j=Object(a.useRef)(0),b=Object(a.useState)("none"),f=Object(I.a)(b,2),O=f[0],h=f[1],m=Object(a.useState)([]),x=Object(I.a)(m,2),g=x[0],y=x[1],v=Object(a.useCallback)(Object(Ct.a)(Nt.a.mark((function e(){var t,a,c;return Nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r[u]){e.next=4;break}return h("failed"),e.abrupt("return");case 4:return h("loading"),j.current+=1,e.next=8,n(359)("./".concat(i.code,"/courses/").concat(u,".json"));case 8:t=e.sent,a=t.default,c=a.reduce((function(e,t){var n,a={sectionPid:p(t.i),sectionTitle:p(t.e),list:[]},c=Object(It.a)(t.t);try{for(c.s();!(n=c.n()).done;){var i=n.value;a.list.push({audioPid:p(i.p),audioTitle:p(i.t),audioUrl:p(i.u),audioDuration:p(i.d)})}}catch(r){c.e(r)}finally{c.f()}return e.push(a),e}),[]),y(c),h("loaded"),e.next=24;break;case 15:if(e.prev=15,e.t0=e.catch(0),!(j.current>=10)){e.next=21;break}h("failed"),e.next=24;break;case 21:return e.next=23,d(200);case 23:v();case 24:case"end":return e.stop()}}),e,null,[[0,15]])}))),[u,i,r]),S=Object(a.useMemo)((function(){if(g.length<=1)return[];var e,t=[],n=0,a=Object(It.a)(g);try{for(a.s();!(e=a.n()).done;){var c=e.value;t.push(Object(k.a)(Object(k.a)({},c),{},{sectionTitle:"".concat(c.sectionTitle," (").concat(c.list.length," \u7bc7)")})),n+=c.list.length}}catch(i){a.e(i)}finally{a.f()}return t.unshift({sectionPid:"all",sectionTitle:"\u5168\u90e8\u7ae0\u8282 (\u5171 ".concat(n," \u7bc7)"),list:[]}),t}),[g]);return $e([null===(e=r[u])||void 0===e?void 0:e.title,i.name].filter(Boolean).join(" - ")),et(i),Xe(r[u]),Object(pe.a)(v),Object($.a)((function(){if("loaded"===O){var e=c.location;if(e.pathname.startsWith("/".concat(i.code,"/courses/"))){var t=e.pathname.replace("/".concat(i.code,"/courses/"),"/".concat(i.abbr,"/c/"));c.replace("".concat(t).concat(e.search))}}}),[O]),"none"===O?null:"failed"===O?Object(H.jsx)(o.a,{to:s?"/".concat(i.abbr,"/index"):"/"}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(V,{title:i.name,course:r[u],goBack:function(){c.replace("/".concat(i.abbr,"/index"))},actions:Object(H.jsxs)(H.Fragment,{children:[S.length>0&&Object(H.jsx)("div",{className:t.actionIcon,children:Object(H.jsx)(be,{course:r[u],sectionEntityList:S})}),Object(H.jsx)("div",{className:t.actionIcon,children:Object(H.jsx)(ke,{})})]})}),Object(H.jsxs)(Ke.a,{maxWidth:"sm",children:["loading"===O&&Object(H.jsx)(Ie,{}),"loaded"===O&&Object(H.jsx)(H.Fragment,{children:Boolean(r[u])&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(wt,{course:r[u]}),Object(H.jsx)(Mt.a,{}),Object(H.jsx)(an,{course:r[u],sectionList:g})]})})]})]})}function on(){var e=function(){var e=Object(at.a)(),t=Object(a.useState)((function(){var t=Z(rt);return["light","dark"].includes(t)||(t=["/vistopia","/v/"].some((function(t){return e.hash.includes(t)}))?"dark":"light"),ot(t)})),n=Object(I.a)(t,2),c=n[0],i=n[1],r=Object(a.useCallback)((function(){var e="light"===c.palette.type?"dark":"light";i(ot(e)),X(rt,e)}),[c,i]);return Object(a.useEffect)((function(){return U.on("toggle-theme",r),function(){return U.off("toggle-theme",r)}}),[r]),{theme:c,toggleTheme:r}}(),t=e.theme,n=Object(a.useMemo)((function(){return Object(s.a)(t)}),[t]),c=Object(a.useMemo)((function(){return y.map((function(e){return["/".concat(e.code,"/index"),"/".concat(e.abbr,"/index")]})).flat()}),[]),i=Object(a.useMemo)((function(){return y.map((function(e){return["/".concat(e.code,"/courses/:courseId"),"/".concat(e.abbr,"/c/:courseId")]})).flat()}),[]);return Object(H.jsx)(Le,{children:Object(H.jsxs)(l.a,{theme:n,children:[Object(H.jsx)(u.a,{}),Object(H.jsx)(r.a,{basename:"/space",children:Object(H.jsxs)(o.d,{children:[Object(H.jsx)(o.b,{strict:!0,exact:!0,path:"/",children:Object(H.jsx)(dt,{})}),Object(H.jsx)(o.b,{strict:!0,exact:!0,path:c,children:Object(H.jsx)(kt,{})}),Object(H.jsx)(o.b,{strict:!0,exact:!0,path:i,children:Object(H.jsx)(rn,{})}),Object(H.jsx)(o.a,{to:"/"})]})})]})})}n(360);i.a.render(Object(H.jsx)(on,{}),document.getElementById("root"))}},[[361,1,2]]]);